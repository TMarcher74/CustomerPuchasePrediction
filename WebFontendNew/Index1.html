<!DOCTYPE html>
<html>
<head>
    <title>Online Shopping Prediction</title>
    <script>
        async function predict(data) {
            try {
                const response = await fetch('http://127.0.0.1:5000/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }

                const result = await response.json();
                if (result.error) {
                    document.getElementById('result').innerText = `Error: ${result.error}`;
                } else {
                    document.getElementById('result').innerHTML = `
                        <p>KNN: ${result.Model1_Revenue ? "Will Complete Purchase" : "Will Not Complete Purchase"}</p>
                        <p>NBC: ${result.Model2_Revenue ? "Will Complete Purchase" : "Will Not Complete Purchase"}</p>
                        <p>SVM: ${result.Model3_Revenue ? "Will Complete Purchase" : "Will Not Complete Purchase"}</p>
                        <p>RF: ${result.Model4_Revenue ? "Will Complete Purchase" : "Will Not Complete Purchase"}</p>
                    `;
                }
            } catch (error) {
                document.getElementById('result').innerText = `Error: ${error.message}`;
                console.error('Error:', error);
            }
        }

        function handleSliderChange() {
            const data = {
                Administrative: parseInt(document.getElementById('Administrative').value),
                Administrative_Duration: parseFloat(document.getElementById('Administrative_Duration').value),
                Informational: parseInt(document.getElementById('Informational').value),
                Informational_Duration: parseFloat(document.getElementById('Informational_Duration').value),
                ProductRelated: parseInt(document.getElementById('ProductRelated').value),
                ProductRelated_Duration: parseFloat(document.getElementById('ProductRelated_Duration').value),
                BounceRates: parseFloat(document.getElementById('BounceRates').value),
                ExitRates: parseFloat(document.getElementById('ExitRates').value),
                PageValues: parseFloat(document.getElementById('PageValues').value),
                SpecialDay: parseFloat(document.getElementById('SpecialDay').value),
                Month: parseInt(document.getElementById('Month').value),
                OperatingSystems: parseInt(document.getElementById('OperatingSystems').value),
                Browser: parseInt(document.getElementById('Browser').value),
                Region: parseInt(document.getElementById('Region').value),
                TrafficType: parseInt(document.getElementById('TrafficType').value),
                VisitorType: parseInt(document.getElementById('VisitorType').value),
                Weekend: parseInt(document.getElementById('Weekend').value)
            };

            predict(data);
        }
    </script>
</head>
<body>
    <h1>Online Shopping Prediction</h1>
    <form oninput="handleSliderChange()">
        <label>Administrative: <input type="range" id="Administrative" min="0" max="20" value="0"></label><br>
        <label>Administrative Duration: <input type="range" id="Administrative_Duration" min="0" max="1000" step="1" value="0"></label><br>
        <label>Informational: <input type="range" id="Informational" min="0" max="20" value="0"></label><br>
        <label>Informational Duration: <input type="range" id="Informational_Duration" min="0" max="1000" step="1" value="0"></label><br>
        <label>Product Related: <input type="range" id="ProductRelated" min="0" max="100" value="0"></label><br>
        <label>Product Related Duration: <input type="range" id="ProductRelated_Duration" min="0" max="10000" step="10" value="0"></label><br>
        <label>Bounce Rates: <input type="range" id="BounceRates" min="0" max="1" step="0.01" value="0"></label><br>
        <label>Exit Rates: <input type="range" id="ExitRates" min="0" max="1" step="0.01" value="0"></label><br>
        <label>Page Values: <input type="range" id="PageValues" min="0" max="100" step="1" value="0"></label><br>
        <label>Special Day: <input type="range" id="SpecialDay" min="0" max="1" step="0.01" value="0"></label><br>
        <label>Month: <input type="range" id="Month" min="1" max="12" value="1"></label><br>
        <label>Operating Systems: <input type="range" id="OperatingSystems" min="1" max="10" value="1"></label><br>
        <label>Browser: <input type="range" id="Browser" min="1" max="10" value="1"></label><br>
        <label>Region: <input type="range" id="Region" min="1" max="9" value="1"></label><br>
        <label>Traffic Type: <input type="range" id="TrafficType" min="1" max="20" value="1"></label><br>
        <label>Visitor Type: <input type="range" id="VisitorType" min="0" max="1" value="0"></label><br>
        <label>Weekend: <input type="range" id="Weekend" min="0" max="1" value="0"></label><br>
    </form>
    <div id="result"></div>
</body>
</html>
